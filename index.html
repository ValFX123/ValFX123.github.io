# 5. Now add the particle JavaScript functionality
# I need to find the right place in the script section to add the particle creation code

# Find the existing script section
script_start = merged_code.find('<script>')
if script_start != -1:
    script_content_start = script_start + len('<script>')
    
    # Add the particle creation JavaScript at the beginning of the script
    particle_js = '''
        // Create floating particles
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            if (!particlesContainer) return;
            
            const particleCount = 30;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                // Random position
                const posX = Math.random() * 100;
                const posY = Math.random() * 100;
                particle.style.left = `${posX}%`;
                particle.style.top = `${posY}%`;
                
                // Random size
                const size = Math.random() * 4 + 1;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                
                // Random animation duration
                const duration = Math.random() * 20 + 10;
                particle.style.animationDuration = `${duration}s`;
                
                // Random delay
                const delay = Math.random() * 5;
                particle.style.animationDelay = `${delay}s`;
                
                particlesContainer.appendChild(particle);
            }
        }
        
        // Initialize particles when page loads
        window.addEventListener('DOMContentLoaded', createParticles);
        
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });

'''
    
    merged_code = merged_code[:script_content_start] + particle_js + merged_code[script_content_start:]
    print("✅ Added particle JavaScript")
else:
    print("❌ Could not find script section")

# 6. Update responsive CSS to include projects grid
responsive_section = merged_code.find('@media (max-width: 768px)')
if responsive_section != -1:
    # Find the existing grid adjustments
    existing_grid_line = merged_code.find('.services-grid {', responsive_section)
    if existing_grid_line != -1:
        # Replace the line to include projects-grid
        old_line = '.services-grid {'
        new_line = '.projects-grid, .services-grid {'
        merged_code = merged_code.replace(old_line, new_line, 1)
        print("✅ Updated responsive CSS for projects")

print(f"Final code length: {len(merged_code)} characters")
