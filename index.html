<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>SourMarket</title>
  <meta name="description" content="SourMarket ‚Äì Unique custom necklaces, chains, skateboards, pillows, keychains, re-textures, and more!">
  <meta name="theme-color" content="#ff5ea7">
  <meta property="og:title" content="SourMarket ‚Äì Custom Items, Gifts, & More!">
  <meta property="og:description" content="Get unique custom necklaces, chains, skateboards, pillows, keychains, re-textures, and more. Secure PayPal payments. Discord support.">
  <meta property="og:image" content="https://i.imgur.com/KcfZIqA.png">
  <link rel="icon" type="image/png" href="https://i.imgur.com/KcfZIqA.png">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:700,400|Orbitron:800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">

  <!-- EmailJS v4 (REQUIRED, must be before main.js!) -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script type="text/javascript">
    (function(){
      emailjs.init({
        publicKey: "INRPByuAfnhpnww8h",
      });
    })();
  </script>
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="logo">
      <img src="https://i.imgur.com/KcfZIqA.png" alt="SourMarket logo">
      SourMarket
    </div>
    <nav>
      <a href="#home" class="active" onclick="switchSection('home');return false;">Home</a>
      <a href="#products" onclick="switchSection('products');return false;">Products</a>
      <a href="#reviews" onclick="switchSection('reviews');return false;">Reviews</a>
    </nav>
    <button class="theme-toggle" id="theme-toggle" title="Toggle light/dark mode" aria-label="Theme toggle">
      <span id="theme-icon">üåô</span>
    </button>
  </header>
  <main>
    <!-- HOME SECTION -->
    <section id="home" style="margin-top:2em;">
      <h1>Welcome to <span style="color: var(--pink5)">SourMarket</span>!</h1>
      <div style="display:flex;flex-wrap:wrap;justify-content:center;align-items:center;gap:3em 2em;">
        <div style="flex:2;min-width:310px;">
          <p style="max-width:590px;font-size:1.21rem;line-height:1.67;color:#6e2a63;margin-top:1.18em;">
            We specialize in unique custom items for everyone! <br>
            <b>Necklaces, chains, skateboards, pillows, keychains, re-textures, custom orders, and more!</b><br>
            <span style="color: var(--pink5);font-weight:600;">Mix & Match available.</span> Surprise yourself or create a ticket for a one-of-a-kind request.
          </p>
        </div>
        <div style="flex:2;min-width:330px;">
          <div class="stats">
            <div class="stat"><div class="num" id="stat-sold">32</div><div class="label">PRODUCTS SOLD</div></div>
            <div class="stat"><div class="num" id="stat-customers">14</div><div class="label">TOTAL CUSTOMERS</div></div>
            <div class="stat"><div class="num" id="stat-reviews">0</div><div class="label">REVIEWS RECEIVED</div></div>
            <div class="stat"><div class="num" id="stat-rating">0.00</div><div class="label">AVERAGE RATING</div></div>
          </div>
        </div>
      </div>
      <div style="text-align:center; margin-top:2.2em;">
        <button class="btn" onclick="switchSection('products');window.scrollTo(0,0);">View Products</button>
      </div>
      <div class="section-links" id="links-home"></div>
      <div class="scroll-arrow" onclick="scrollToSection('products')" title="Scroll to products">
        <svg fill="none" stroke="currentColor" stroke-width="2.4" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg>
      </div>
    </section>

    <!-- PRODUCTS SECTION -->
    <section id="products" style="display:none;">
      <div class="section-title">Our Products</div>
      <div class="products-grid" id="products-grid"></div>
      <div class="section-links" id="links-products"></div>
      <div class="scroll-arrow" onclick="scrollToSection('reviews')" title="Scroll to reviews">
        <svg fill="none" stroke="currentColor" stroke-width="2.4" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg>
      </div>
    </section>

    <!-- REVIEWS SECTION -->
    <section id="reviews" style="display:none;">
      <div class="section-title">Customer Reviews</div>
      <div class="reviews-list" id="reviews-list"></div>
      <form class="review-form" id="review-form" autocomplete="off" onsubmit="return addReview(event)">
        <label for="review-name">Your Name:</label>
        <input id="review-name" name="name" type="text" maxlength="20" required placeholder="Name">
        <label for="review-rating">Rating:</label>
        <select id="review-rating" name="rating" required>
          <option value="5">5 - Excellent!</option>
          <option value="4">4 - Good</option>
          <option value="3">3 - Okay</option>
          <option value="2">2 - Bad</option>
          <option value="1">1 - Awful</option>
        </select>
        <label for="review-text">Your Review:</label>
        <textarea id="review-text" name="review" rows="3" maxlength="300" required placeholder="Write your experience here..."></textarea>
        <div class="err" id="review-error"></div>
        <button type="submit" class="btn">Submit Review</button>
      </form>
      <div class="section-links" id="links-reviews"></div>
    </section>

    <!-- FAQ -->
    <div class="faq-box" id="faq">
      <div class="faq-title">FAQ</div>
      <div class="faq-q" tabindex="0" onclick="toggleFaq(this)">How do I pay for a product? <span>+</span></div>
      <div class="faq-a">Click ‚ÄúPay Here!‚Äù on your chosen product, follow the instructions, and complete payment using PayPal‚Äôs ‚ÄúFriends & Family‚Äù option.</div>
      <div class="faq-q" tabindex="0" onclick="toggleFaq(this)">How do I get my product? <span>+</span></div>
      <div class="faq-a">After payment, you‚Äôll be given a link to our Discord for instant delivery or support!</div>
      <div class="faq-q" tabindex="0" onclick="toggleFaq(this)">Can I make a custom order? <span>+</span></div>
      <div class="faq-a">Yes! Choose ‚ÄúCustom Orders‚Äù in Products or message us on Discord for a quote and design chat.</div>
    </div>

    <!-- Product Modal (unchanged, but IDs must match!) -->
    <div id="product-modal-bg" class="modal-bg" style="display:none;">
      <div class="modal" id="product-modal">
        <button class="modal-close" onclick="closeModal()">&times;</button>
        <div>
          <img class="icon" src="https://i.imgur.com/KcfZIqA.png" alt="icon" style="width:54px;height:54px;margin-bottom:0.9em;">
        </div>
        <div class="modal-title" id="modal-title"></div>
        <div class="modal-desc" id="modal-desc"></div>
        <div>
          <span class="product-price" id="modal-price"></span>
        </div>
        <div class="product-stock" id="modal-stock"></div>
        <button class="btn" id="modal-pay-btn" style="margin-top:2em;">Pay Here!</button>
      </div>
    </div>
    <!-- Payment Popup -->
    <div id="pay-popup-bg" class="pay-popup-bg" style="display:none;">
      <div id="pay-popup-content"></div>
    </div>
    <!-- Confetti Canvas -->
    <canvas class="confetti" id="confetti-canvas" style="display:none"></canvas>
    <!-- Scroll to Top Button -->
    <button id="top-btn" onclick="window.scrollTo({top:0,behavior:'smooth'})" style="display:none;position:fixed;right:23px;bottom:26px;background:linear-gradient(90deg,#ff5ea7,#ffa1d7);color:#fff;border:none;border-radius:50%;width:46px;height:46px;box-shadow:0 4px 18px #ffb6e05a;font-size:2.1em;z-index:2222;cursor:pointer;">&#8679;</button>
    <!-- Footer -->
    <div class="footer-support">
      Questions or business inquiries? Email us: <b>SourMarketBusiness@gmail.com</b>
    </div>
  </main>
  <script src="main.js"></script>
</body>
</html>
